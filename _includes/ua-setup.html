<p>The Unfetter Analytic server-side system is built using Docker to easily spin up containers for running each of the desired
    applications. </p>
<p>These instructions show how to setup the Windows Victim and the Unfetter Analytic SIEM. Services will be configured and started,
    Windows event logs and Sysmon data will be forwarded and ingested, and Kibana dashboards will be running, analytics will
    run and alerts can be pushed to Unfetter-Discover in future releases.</p>
<p>The Unfetter Analytic system was tested on Windows 7 Professional and Windows 10 Home host operating systems (OSes) using
    VirtualBox. However, any OS that supports Vagrant should work, since both systems run in virtual machines (VMs).</p>
<h1>To install the prerequisites</h1>
<ul>
    <li>Install
        <a href="https://www.docker.com/products/overview" target="_blank">Docker</a>

    </li>
    <li>Install
        <a href="https://www.vagrantup.com/docs/installation" target="_blank">Vagrant</a> (optionals)
    </li>
    <li>Install
        <a href="https://www.virtualbox.comwiki/Downloads" target="_blank">Oracle's VirtualBox</a>
    </li>
    <li>Install a git client
    </li>
</ul>
<h1>Starting The Server</h1>
<p>The Unfetter Analytic Linux VM contains the ELK stack, Apache Spark, and the Python (PySpark) files that run the analytics.</p>
<p>The Windows VM is a Windows 7 32-bit with Microsoft Sysmon and Nxlog installed. </p>
<p>There are two GitHub projects needed to run the Unfetter Analytic system. They are all found under
    <a href="https://www.github.com/unfetter-analytic" target="_blank">www.github.com/unfetter-analytic</a>
</p>
<p>You can easily clone the GitHub repos and start the Unfetter Analytic SIEM:
    <pre><code>
mkdir unfetter-analytic
cd unfetter-analytic
git clone https://github.com/unfetter-analytic/unfetter.git
git clone https://github.com/unfetter-analytic/windows-example.git
cd unfetter
docker-compose up
    </code></pre>
</p>
<p>In analytic-system directory, there is a file called run.sh. Docker will run this file as the main workhorse for the analytic
    system. It is looping through all the analytics and running them, pushing any results to Elasticsearch AND the locally
    created Unfetter-Discover. Change run.sh to perform whatever analytics you want. </p>
<p>Wait until Docker has started. There won't be any data until the Windows system begins running and forwards events.</p>
<p>The running docker container "analytic-system" has the analytics. If you want to run analytics individually, attach to this
    container to run them.</p>
<h1>Starting Windows Victim</h1>
<p>Setting up the Windows system the first time has a few more steps than setting up the analytic server. You will need a version
    of Windows 7 that can be created as a box file. There are a few ways to do this, but these instructions will show you
    how to use
    <a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/" target="_blank">modern.ie</a> to download an evaluation copy of Windows 7 from Microsoft.</p>
<ul>
    <li>
        On your Windows machine, install
        <a href="https://www.elastic.co/guide/en/beats/winlogbeat/current/winlogbeat-installation.html">WinLogBeat 6.x</a>. You may use our sample
        <a href="https://github.com/unfetter-analytic/windows-example/tree/master/resources">winlogbeat.yml</a> file.
    </li>
    <li>
        On your Windows machine, install
        <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/sysmon">Sysmon 7.x</a>. You may use our a sample
        <a href="https://github.com/unfetter-analytic/windows-example/tree/master/resources">sysmon.xml</a> file.
    </li>
</ul>
<p>We have included Vagrant files to help install and manage the VMs. Vagrant won't be able to complete the provisioning on
    its own. Manual configuration of Vagrant is necessary so that Vagrant can communicate with the guest Windows OS. When
    the Windows GUI starts, do the following on the VirtualBox window. HOWEVER: the Vagrant file does not properly setup
    all the services as described above. This is a bug that needs to be fixed.</p>
<p>Set the network location to Home or Work. Go to Control panel -&gt; Network and Sharing Center and click on "Public network"
    under "View Your Active Networks" in order to change the type. Run the following script as administrator:
    <pre><code>
@echo off
set WINRM_EXEC=call %SYSTEMROOT%\System32\winrm %WINRM_EXEC%
quickconfig -q
%WINRM_EXEC% set
winrm/config/winrs @{MaxMemoryPerShellMB="300"}
%WINRM_EXEC% set winrm/config @{MaxTimeoutms="1800000"}
%WINRM_EXEC%
set winrm/config/client/auth @{Basic="true"}
%WINRM_EXEC% set winrm/config/service @{AllowUnencrypted="true"}
%WINRM_EXEC% set winrm/config/service/auth @{Basic="true"}
</code></pre> This script is located in unfetter-windows/resources/winrm.cmd on the host OS. After you change the network type in
    the guest OS the script will be accessible under \VBOXSVR\vagrant\resources. Either execute it from that location or
    copy it and paste it into a new .cmd file on the guest OS using Notepad.</p>
<p>Navigate back to the window where "vagrant up" was executed. Provisioning should continue now that Vagrant can communicate
    with the guest OS. Vagrant will install and configure Sysmon and Nxlog. When it is all done, check the following log
    file for errors to make sure the Windows machine can see the analytic server:
    <strong>c:\Program Files\nxlog\data\nxlog.log</strong>
</p>
<p>The VM can be accessed through the GUI. If you used Modern.ie, then the credentials are "IEUser/Passw0rd!"</p>
<p>It is HIGHLY recommended that if you work with Microsoft Windows, you purchase a licensed copy and build your own Vagrant
    box file. If you want to make your own base Windows box, this
    <a href="http://www.hurryupandwait.io/blog/creating-windows-base-images-for-virtualbox-and-hyper-v-using-packer-boxstarter-and-vagrant"
        target="_blank">webpage</a> has an example.</p>
<h1>Web Interfaces</h1>
<p>Unfetter Analytic provides three interfaces to see your collected data. Kibana provides a full-featured interface to perform
    complex searches. You can access it at:
    <strong>http://localhost:5601</strong>
</p>